<!doctype html>

<html lang="en">


<head>

  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>The xmake.json files</title>
  <meta name="description" content="Tools to manage, configure and build complex, package based, multi-target, C/C++ projects.">

  <meta property="og:title" content="The xmake.json files" />
  <meta property="og:site_name" content="xPack" />

  <link rel="alternate" type="application/rss+xml" title="xPack" href="/feed.xml" />


  <meta property="article:published_time" content="2017-10-09">





  <meta name="google-site-verification" content="NT_y3tqI_8mrd8gYA_FDWHT2-tkJExOC6KBkSnyZx6c" />

  <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css?201710011132" media="screen">
  <link rel="stylesheet" type="text/css" href="/stylesheets/font-awesome.css?201710011132" media="screen">
  <link rel="stylesheet" type="text/css" href="/stylesheets/print.css?201710011132" media="print">

  <link rel="canonical" href="http://xpack.github.io/xmake/files/xmake-json/">



  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-16767008-13', 'auto');
  ga('send', 'pageview');

</script>



</head>


<body>

<div class="container">

  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.4";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

  <script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>

  <div class="site-header">
  <table style="width:100%">
    <tr>
      <td>
        <a href="/">
          <img alt="Icon" class="site-icon" src="/assets/icons/components.png" height="100" width="100">
      </a>
      </td>
      <td>
        <table class="site-title" style="width:100%">
          <tr>
            <td class="site-title">
              <a href="/">xPack</a>
            </td>
            <td class="site-motto" align="right">
              “Perfekt ist nicht gut genug”
            </td>
          </tr>
          <tr>
            <td class="site-description" colspan="2">
              Tools to manage, configure and build complex, package based, multi-target, C/C++ projects.
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</div>


</div>

<div class="container">

  <div class="wrapper">
    <div class="site-body">

      <div class="site-sidebar">


  <div class="custom-sidebar">
    <div class="boxed-group-inner">
      <h4 id="news"><a href="/blog/">News</a></h4>

<ul>
  <li><a href="/blog/2017/10/01/web-new-look/">The xPack new web site</a></li>
</ul>


    </div>
  </div>


  <div class="custom-sidebar">
    <div class="boxed-group-inner">
      
      <h4 id="home"><a href="/">Home</a></h4>

<h4 id="xpm">xpm</h4>

<ul>
  <li><a href="/xpm/">Overview</a></li>
  <li><a href="/xpm/getting-started/">Getting started</a></li>
  <li><a href="/xpm/how-xpm-works/">How xpm works</a></li>
  <li><a href="/xpm/cli/">CLI commands</a></li>
</ul>

<h4 id="xmake">xmake</h4>

<ul>
  <li><a href="/xmake/">Overview</a></li>
  <li><a href="/xmake/getting-started/">Getting started</a></li>
  <li><a href="/xmake/how-xmake-works/">How xmake works</a></li>
  <li><a href="/xmake/cli/">CLI commands</a></li>
</ul>

<h4 id="xcdl">xcdl</h4>

<ul>
  <li><a href="/xcdl/">Overview</a></li>
  <li><a href="/xcdl/files/">File formats</a></li>
</ul>

<h4 id="xsvd">xsvd</h4>

<ul>
  <li><a href="/xsvd/">Overview</a></li>
  <li><a href="/xsvd/files/">File formats</a></li>
</ul>

<h4 id="developer">Developer</h4>

<ul>
  <li><a href="/develop/">Overview</a></li>
</ul>

<h4 id="support">Support</h4>

<ul>
  <li><a href="/support/">Overview</a></li>
  <li><a href="/support/known-issues/">Known issues</a></li>
  <li><a href="/support/faq/">FAQ</a></li>
  <li><a href="/support/forum/">Forum</a></li>
</ul>

<h4 id="license">License</h4>

<ul>
  <li><a href="https://opensource.org/licenses/MIT">MIT</a></li>
</ul>

<h4 id="about"><a href="/about/">About</a></h4>

    </div>
  </div>

  <div class="site-theme">
    This site uses the <a href="https://github.com/ilg-ul/github-jekyll-theme">GitHub Wiki-like</a> theme by <a href="https://github.com/ilg-ul">Liviu Ionescu</a>.
  </div>

</div>


      <div class="site-content">

        
<h1 class="page-title">The xmake.json files</h1>
<table id="last-modified">
  <tr>
    <td id="last-modified">Last modified on Mon Oct  9 13:56:21 2017 UTC.</td>
    <td id="improve" align="right"><a id="improve" href="https://github.com/xpack/xpack.github.io-source/edit/master/pages/xmake/files/xmake-json.md"><i class="fa fa-pencil"></i>&nbsp;&nbsp;Improve this page</a></td>
  </tr>
</table>


<div id="toc-container">
<table class="toc" id="toc">
<tbody>
<tr>
<td>
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toc_level-1 toc_section-1">
<a href="#overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
</li>
<li class="toc_level-1 toc_section-2">
<a href="#lower-case-names"><span class="tocnumber">2</span> <span class="toctext">Lower case names</span></a>
</li>
<li class="toc_level-1 toc_section-3">
<a href="#paths"><span class="tocnumber">3</span> <span class="toctext">Paths</span></a>
</li>
<li class="toc_level-1 toc_section-4">
<a href="#macros"><span class="tocnumber">4</span> <span class="toctext">Macros</span></a>
</li>
<li class="toc_level-1 toc_section-5">
<a href="#addremove"><span class="tocnumber">5</span> <span class="toctext">Add/remove</span></a>
</li>
<li class="toc_level-1 toc_section-6">
<a href="#build-tree"><span class="tocnumber">6</span> <span class="toctext">Build tree</span></a>
</li>
<li class="toc_level-1 toc_section-7">
<a href="#project-andor-test-folders"><span class="tocnumber">7</span> <span class="toctext">Project and/or test folders</span></a>
</li>
<li class="toc_level-1 toc_section-8">
<a href="#version"><span class="tocnumber">8</span> <span class="toctext">Version</span></a>
</li>
<li class="toc_level-1 toc_section-9">
<a href="#name"><span class="tocnumber">9</span> <span class="toctext">Name</span></a>
</li>
<li class="toc_level-1 toc_section-10">
<a href="#artefact"><span class="tocnumber">10</span> <span class="toctext">artefact</span></a>
</li>
<li class="toc_level-1 toc_section-11">
<a href="#generator"><span class="tocnumber">11</span> <span class="toctext">Generator</span></a>
</li>
<li class="toc_level-1 toc_section-12">
<a href="#commands"><span class="tocnumber">12</span> <span class="toctext">Commands</span></a>
</li>
<li class="toc_level-1 toc_section-13">
<a href="#source-folders"><span class="tocnumber">13</span> <span class="toctext">Source folders</span></a>
</li>
<li class="toc_level-1 toc_section-14">
<a href="#symbols"><span class="tocnumber">14</span> <span class="toctext">Symbols</span></a>
</li>
<li class="toc_level-1 toc_section-15">
<a href="#include-folders"><span class="tocnumber">15</span> <span class="toctext">Include folders</span></a>
</li>
<li class="toc_level-1 toc_section-16">
<a href="#targets"><span class="tocnumber">16</span> <span class="toctext">Targets</span></a>
</li>
<li class="toc_level-1 toc_section-17">
<a href="#toolchains"><span class="tocnumber">17</span> <span class="toctext">Toolchains</span></a>
</li>
<li class="toc_level-1 toc_section-18">
<a href="#common"><span class="tocnumber">18</span> <span class="toctext">Common</span></a>
</li>
<li class="toc_level-1 toc_section-19">
<a href="#tools"><span class="tocnumber">19</span> <span class="toctext">Tools</span></a>
</li>
<li class="toc_level-1 toc_section-20">
<a href="#profiles"><span class="tocnumber">20</span> <span class="toctext">Profiles</span></a>
</li>
<li class="toc_level-1 toc_section-21">
<a href="#folderfile-specific-metadata"><span class="tocnumber">21</span> <span class="toctext">Folder/file specific metadata</span></a>
</li>
<li class="toc_level-1 toc_section-22">
<a href="#excluded-paths"><span class="tocnumber">22</span> <span class="toctext">Excluded paths</span></a>
</li>
<li class="toc_level-1 toc_section-23">
<a href="#todo"><span class="tocnumber">23</span> <span class="toctext">TODO</span></a>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div><h2 id="overview">Overview</h2>

<p>The <code class="highlighter-rouge">xmake.json</code> file defines the metadata required by the xmake build process.</p>

<p>This file is used in two contexts:</p>
<ul>
  <li>when located in the project root, or in a test folder, this file 
defines how to build the artefact (executable or library); it must 
have a mandatory <code class="highlighter-rouge">name</code> field.</li>
  <li>when located in sub-folders, it is simpler and it defines build 
details specific to 
the sub-folder, usually compiler options and/or symbols.</li>
</ul>

<p>Note: some sections may not strictly apply to the <code class="highlighter-rouge">xmake.json</code> file and
should be moved to a more general document about xmake.</p>

<h2 id="lower-case-names">Lower case names</h2>

<p>All names must be composed from letters, hyphens, or digits. When used to create 
paths, case is not significative and all letters are converted to lower case.</p>

<h2 id="paths">Paths</h2>

<p>All paths use the POSIX syntax, with <code class="highlighter-rouge">/</code> separators.</p>

<h2 id="macros">Macros</h2>

<p>In certain places, strings may contain macros, with the following syntax:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="k">${</span><span class="nv">expression</span><span class="k">}</span>
</code></pre>
</div>

<p>where <em>expression</em> may be a name or a qualified name, like <code class="highlighter-rouge">test.name</code>.</p>

<h2 id="addremove">Add/remove</h2>

<p>Generally definitions are organised hierarchically 
(top/target/toolchain/profile), with each child
being able to contribute new, more specific definitions, to the parent.</p>

<p>For each level, definitions are kept in an ordered list. The common use case is to 
copy definitions from the parent and add new definitions to the end of the 
list.</p>

<p>If a definition from the parent is definitely not wanted, the child can 
decide not to copy it, using the <code class="highlighter-rouge">removeXxx</code> properties.</p>

<h2 id="build-tree">Build tree</h2>

<p>The build tree is constructed of nodes. Nodes refer to folders or files;
the build tree hierarchy follows the file system hierarchy.</p>

<p>Folder nodes may have other folders or file as children.</p>

<p>The build tree is constructed for each build configuration, i.e. for each
target/profile/toolchain.</p>

<p>Each new depth level may contribute additional compiler options to the build,
and files located deeper in the hierarchy may be compiled with different 
definitions (options, symbols, includes, etc).</p>

<h2 id="project-andor-test-folders">Project and/or test folders</h2>

<p>To identify a folder as an xmake project, a full <code class="highlighter-rouge">xmake.json</code> file, 
which includes the <code class="highlighter-rouge">name</code> field, is expected in the project root.</p>

<p>Tests are a specific kind of executable projects, and are identified 
by an <code class="highlighter-rouge">xmake.json</code> in each test folder.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"executable"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${build.name}"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputPrefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputSuffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"generator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"make"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"make"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"run"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"./${artefact.fullName}"</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"src"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"GNU_SOURCE"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"include"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"darwin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nt">"stm32f4-discovery"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"sourceFolderSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nt">"sourceFilesSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="version">Version</h2>

<p>Type: string.</p>

<p>This semver string identifies the expected structure of the JSON content.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>It is mandatory for all <code class="highlighter-rouge">xmake.json</code> files. A recent version of the 
xmake tools should be prepared to parse all older version of the
<code class="highlighter-rouge">xmake.json</code> files. An old version of the xmake tools 
should throw an error when asked to process a newer, incompatible 
version of <code class="highlighter-rouge">xmake.json</code> file.</p>

<h2 id="name">Name</h2>

<p>Type: string.</p>

<p>This string defines the build name. It is mandatory for projects and 
for tests.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xyz"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="artefact">artefact</h2>

<p>Type: object.</p>

<p>It can be used only in project or test <code class="highlighter-rouge">xmake.json</code> files; using it in folder 
specific metadata files triggers an warning.</p>

<p>The <code class="highlighter-rouge">artefact</code> object defines the type and name of the output file.</p>

<p>The <code class="highlighter-rouge">type</code> property can be one of:</p>

<ul>
  <li><code class="highlighter-rouge">executable</code> (default)</li>
  <li><code class="highlighter-rouge">staticLib</code> (default extension is <code class="highlighter-rouge">.a</code>)</li>
  <li><code class="highlighter-rouge">sharedLib</code> (default extension is <code class="highlighter-rouge">.so</code> for Linux)</li>
</ul>

<p>The <code class="highlighter-rouge">name</code> property defaults to the test name. It may include the macros 
<code class="highlighter-rouge">${build.name}</code> or <code class="highlighter-rouge">${test.name}</code>. If not present, it defaults to the 
mandatory project or test name.</p>

<p>The <code class="highlighter-rouge">artefact</code> object may be defined at top level, or for a given 
target/profile. Each definition is searched hierarchically, bottom-up; 
if present in the profile, it is used, otherwise the parent definition
it is used; if none is defined, a default is applied.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"executable"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"${test.name}"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputPrefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outputSuffix"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="generator">Generator</h2>

<p>Type: string.</p>

<p>It can be used only in project or test <code class="highlighter-rouge">xmake.json</code> files; using it in folder 
specific metadata files triggers an warning.</p>

<p>This string identifies the generator used to create the project.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"generator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"make"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Currently only <code class="highlighter-rouge">make</code> is supported, but generators for Eclipse 
managed projects are planned.</p>

<h2 id="commands">Commands</h2>

<p>Type: object.</p>

<p>It can be used only in project or test <code class="highlighter-rouge">xmake.json</code> files; using it in folder 
specific metadata files triggers an warning.</p>

<p>The <code class="highlighter-rouge">commands</code> object associates external commands to different actions.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"make"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"run"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"./${artefact.fullName}"</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The actions are identified as object properties; the values are 
arrays of strings with command lines.</p>

<p>When serialised, the values are string arrays; when parsed, the 
values may be strings, parsed as multiple words separated by spaces.</p>

<p>The <code class="highlighter-rouge">build</code> command is used to start the actual builder, after 
the build files were generated.</p>

<p>The <code class="highlighter-rouge">run</code> command is used to run a test, after a successful build. 
If the <code class="highlighter-rouge">run</code> command is missing in a test configuration, the test is
considered <em>build only</em>.</p>

<h2 id="source-folders">Source folders</h2>

<p>Type: array of strings.</p>

<p>This array defines the paths to the folders containing source files.
All paths are relative to the current folder.</p>

<p>Source folders can be defined hierarchically (top/target/profile/toolchain), 
for all configurations or for a specific target/profile/toolchain.</p>

<p>Definitions are cumulative, each may remove/add entries to the parent array.</p>

<p>For tests, which are located deeper in the file system hierarchy, 
a typical configuration is:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"../../src"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"."</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If a definition from the parent is definitely not wanted, it can be removed:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"lib"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If the definitions to be removed did not exist, warnings are issued.</p>

<p>For a given build, all source folders are searched for source files, 
possible exclusions from <code class="highlighter-rouge">sourceFolderSettings</code> are processed, and the 
remaining files enter the build.</p>

<p>If, for a given profile, this array ends up empty, and the current 
folder includes a <code class="highlighter-rouge">package.json</code>, the 
<code class="highlighter-rouge">directories.src</code> definition (an array of strings), if present, is used. 
Otherwise, if the <code class="highlighter-rouge">src</code> folder is present, it is used; if not, the current
folder is used.</p>

<p>When serialised, the values are string arrays; when parsed, the values 
may be strings, parsed as multiple words separated by spaces.</p>

<h2 id="symbols">Symbols</h2>

<p>Type: array of strings.</p>

<p>This array defines symbols to be passed to the compiler preprocessor. 
Simple names or pairs of names and values are accepted.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"GNU_SOURCE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"NAME=value"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Definitions are cumulative, each may remove/add entries to the parent array.</p>

<p>If a definition from the parent is definitely not wanted, it can be removed:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"GNU_SOURCE"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If the definitions to be removed did not exist, warnings are issued.</p>

<p>When serialised, the values are string arrays; when parsed, the values 
may be strings, parsed as multiple words separated by spaces.</p>

<h2 id="include-folders">Include folders</h2>

<p>Type: array of strings.</p>

<p>This array defines the folders to be passed to the compiler as include 
folders. All paths are relative to the current folder.</p>

<p>Include folders can be defined hierarchically (top/target/profile/toolchain), 
for all configurations or for a specific target/profile/toolchain.</p>

<p>Definitions are cumulative, each may remove/add entries to the parent array.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"include/xyz"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If a definition from the parent is definitely not wanted, it can be removed:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"include/abc"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>If the definitions to be removed did not exist, warnings are issued.</p>

<p>If, for a given profile, this array ends up empty, and the current 
folder includes a <code class="highlighter-rouge">package.json</code>, the 
<code class="highlighter-rouge">directories.include</code> definition (an array of strings), if present, is used. 
Otherwise, if the <code class="highlighter-rouge">include</code> folder is present, it is used; if not, the current
folder is used.</p>

<p>When generating the build files, relative paths from the build folder 
to the actual files are created.</p>

<p>When serialised, the values are string arrays; when parsed, the values 
may be strings, parsed as multiple words separated by spaces.</p>

<h2 id="targets">Targets</h2>

<p>Type: object.</p>

<p>The <code class="highlighter-rouge">targets</code> object defines the possible targets, or platforms, the 
artefact is to be build for.</p>

<p>Each target may include several profiles.</p>

<p>Each target may contribute its own specific definitions to the common 
definitions.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"darwin"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"toolchains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="err">}</span><span class="p">,</span><span class="w">
    </span><span class="nt">"stm32f4-discovery"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"crossBuildPlatforms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"darwin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"linux"</span><span class="p">,</span><span class="w"> </span><span class="s2">"windows"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"toolchains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="err">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>
</div>

<p>The <code class="highlighter-rouge">excludedPaths</code> array defines folders and/or files that should 
not be part of the build, for a specific target.</p>

<p>Target names are predefined strings.</p>

<p>TODO: explain where target names come from.</p>

<h2 id="toolchains">Toolchains</h2>

<p>Type: object.</p>

<p>The <code class="highlighter-rouge">toolchains</code> object defines the command line options used for each compiler.</p>

<p>Each toolchain may contribute its own specific definitions to the common 
definitions.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"toolchains"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"gcc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"common"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"tools"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"profiles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"arm-none-eabi-gcc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"common"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"tools"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"profiles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The <code class="highlighter-rouge">excludedPaths</code> array defines folders and/or files that should 
not be part of the build, for a specific toolchain.</p>

<p>Toolchain names are predefined strings.</p>

<p>TODO: explain where Toolchain names come from.</p>

<h2 id="common">Common</h2>

<p>Type: object.</p>

<p>The <code class="highlighter-rouge">common</code> object defines settings common for all tools.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"common"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"removeTarget"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"addTarget"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"-mcpu=cortex-m3"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"removeDebugging"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"-g3"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"addDebugging"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"-g3"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"removeOptimizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"addOptimizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"-O3"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"removeWarnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"-Wall"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"addWarnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"-Wall"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"removeMiscellaneous"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"addMiscellaneous"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="tools">Tools</h2>

<p>Type: object.</p>

<p>The <code class="highlighter-rouge">tools</code> object defines specific settings for one or more tools. 
When applied to a file, only one tool is significative, according 
to the file extension.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"tools"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"c"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeIncludes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addIncludes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeDebugging"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addDebugging"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeOptimizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addOptimizations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeWarnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addWarnings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeMiscellaneous"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addMiscellaneous"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>When serialised, the values are string arrays; when parsed, the values 
may be strings, parsed as multiple words separated by spaces.</p>

<h2 id="profiles">Profiles</h2>

<p>Type: object.</p>

<p>The <code class="highlighter-rouge">profiles</code> object defines the possible slightly different builds, 
typically debug/release.</p>

<p>Each profile may contribute its own specific definitions to the common 
definitions.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"profiles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">],</span><span class="w">
      </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"common"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"tools"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"release"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"artefact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addSourceFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"common"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nt">"tools"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The <code class="highlighter-rouge">excludedPaths</code> array defines folders and/or files that should 
not be part of the build, for a specific profile.</p>

<p>Profile names are user defined strings.</p>

<h2 id="folderfile-specific-metadata">Folder/file specific metadata</h2>

<p>The definitions in the top <code class="highlighter-rouge">xmake.json</code> file apply to all files that enter 
the build.</p>

<p>However it is possible to enter specific definitions for folders, and 
in this case they apply for all files in the folder, or for a specific file.</p>

<p>Two kinds of data can be defined:</p>
<ul>
  <li>for source folders, a list of exclusions (folders and/or files)</li>
  <li>for source folders/files, possible different compiler settings.</li>
</ul>

<p>The folder/file settings are not kept in the top file, but are distributed 
in each folder, with file paths local to the folder.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"sourceFolderSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"sourceFilesSettings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"xyzFilePath1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"xyzFilePath2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"removeSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addSymbols"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"removeIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"addIncludeFolders"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="excluded-paths">Excluded paths</h2>

<p>Type” array of strings.</p>

<p>The <code class="highlighter-rouge">excludedPaths</code> array defines folders and/or files that should 
not be part of the build, for all configurations or for a specific 
configuration.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"excludedPaths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> 
    </span><span class="s2">"mem1.c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mem3.c"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Excluded paths are relative to the current folder, and should refer only to 
files/folders in the current folder (in other words, a folder should 
not define exclusion from a child folder).</p>

<h2 id="todo">TODO</h2>

<ul>
  <li>add linker definitions</li>
  <li>add pre/post actions</li>
</ul>









<ul class="share-buttons">
  <li><div class="fb-share-button" data-href="http://xpack.github.io/xmake/files/xmake-json/" data-layout="button"></div></li>
  <li><div class="tw-share-button"><a href="https://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a></div></li>
</ul>



      </div>

    </div>
  </div>

</div>

<div class="container">

  <div class="site-footer">
  <div class="site-footer-links left">
    <ul>
  <li>© 2017 Liviu Ionescu</li>
  <li><a href="/feed.xml"><img src="/assets/images/feed-20.png" alt="RSS" /></a></li>
  <li>
    <div class="fb-like" data-href="https://facebook.com/xpack.project/" data-layout="button" data-action="like" data-show-faces="false" data-share="false"></div>
  </li>
  <li><a href="http://twitter.com/xpack_project" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow</a><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></li>
</ul>


  </div>
  <a href="https://github.com/xpack" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
  </a>
  <div class="site-footer-links right">
    <ul>
  <li><a href="/">Home</a></li>
  <li><a href="/blog/">News</a></li>
  <li><a href="/support/">Support</a></li>
  <li><a href="/about/">About</a></li>
</ul>

  </div>
</div>


</div>

</body>
</html>
